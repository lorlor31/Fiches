import{_ as e,c as s,o as a,a2 as n}from"./chunks/framework.CEgrwLex.js";const g=JSON.parse('{"title":"RESUME DU COURS \\"ALLER PLUS LOIN AVEC WP\\" OCC","description":"","frontmatter":{},"headers":[],"relativePath":"WP/WP-creer-site-OCC.md","filePath":"WP/WP-creer-site-OCC.md"}'),t={name:"WP/WP-creer-site-OCC.md"},p=n(`<h1 id="resume-du-cours-aller-plus-loin-avec-wp-occ" tabindex="-1">RESUME DU COURS &quot;ALLER PLUS LOIN AVEC WP&quot; OCC <a class="header-anchor" href="#resume-du-cours-aller-plus-loin-avec-wp-occ" aria-label="Permalink to &quot;RESUME DU COURS &quot;ALLER PLUS LOIN AVEC WP&quot; OCC&quot;">​</a></h1><h2 id="installer" tabindex="-1">Installer <a class="header-anchor" href="#installer" aria-label="Permalink to &quot;Installer&quot;">​</a></h2><ul><li>Installer la LAMP, créer une BDD MySQL et installer WP <a href="https://fr.wordpress.org/" target="_blank" rel="noreferrer">https://fr.wordpress.org/</a></li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Titre du site wp</span></span>
<span class="line"><span>id : lorlor31</span></span>
<span class="line"><span>MDP *Gkj8JB9FJ@^eJ(MF)</span></span></code></pre></div><h2 id="theme-generalites" tabindex="-1">Thème - Généralités <a class="header-anchor" href="#theme-generalites" aria-label="Permalink to &quot;Thème - Généralités&quot;">​</a></h2><ul><li>Choisir un thème : Apparence -&gt;Thème -&gt; Activer</li><li>On peut personnaliser logo, couleurs, nom du site, menus, pages principales</li><li>Structure d&#39;un thème</li></ul><p>En gras les obligatoires</p><p>En italique les fichiers pour les articles/archives ?</p><table tabindex="0"><thead><tr><th>Nom du fichier</th><th>Rôle</th></tr></thead><tbody><tr><td><strong>index.php</strong></td><td>tpl principal</td></tr><tr><td><strong>style.css</strong></td><td>style</td></tr><tr><td><strong>functions.php</strong></td><td>fctnalités du thème</td></tr><tr><td>header.php</td><td>élements html head</td></tr><tr><td>footer.php</td><td>footer</td></tr><tr><td>sidebar.php</td><td>--</td></tr><tr><td>front-page.php</td><td>--</td></tr><tr><td>home.php</td><td>--</td></tr><tr><td>singular.php</td><td>--</td></tr><tr><td><em>single.php</em></td><td>un article</td></tr><tr><td><em>single-{post-type}.php</em></td><td>un article d&#39;un type précis</td></tr><tr><td><em>archive.php</em></td><td>--</td></tr><tr><td><em>archive-{post-type}.php</em></td><td>--</td></tr><tr><td>page.php</td><td>--</td></tr><tr><td>page-{slug}.php</td><td>--</td></tr><tr><td><em>category.php</em></td><td>--</td></tr><tr><td>author.php</td><td>--</td></tr><tr><td>date.php</td><td>--</td></tr><tr><td><em>search.php</em></td><td>--</td></tr><tr><td>attachment.php</td><td>--</td></tr><tr><td>image.php</td><td>--</td></tr><tr><td>404.php</td><td></td></tr><tr><td>comments.php</td><td>--</td></tr><tr><td><em>taxonomy.php</em></td><td>--</td></tr></tbody></table><h2 id="creer-un-theme-enfant" tabindex="-1">Créer un thème enfant <a class="header-anchor" href="#creer-un-theme-enfant" aria-label="Permalink to &quot;Créer un thème enfant&quot;">​</a></h2><ul><li>On utilise Gutenberg et les blocs pour créer un tpl</li><li>On peut y rajouter des extensions WP avec des blocs complémentaires.</li><li>On crée un dossier MonTheme ds le dossier themes et on copie style.css (template ctient le text domain du thème parent), functions.php et index.php, screenshot.png (cf exp)</li><li>A mettre dans style.css :</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span></span></span>
<span class="line"><span>/*</span></span>
<span class="line"><span>Theme Name: CookInFamily</span></span>
<span class="line"><span>Theme URI: https://www.cookinfamily.fr</span></span>
<span class="line"><span>Author: OpenClassrooms</span></span>
<span class="line"><span>Author URI: https://openclassrooms.com</span></span>
<span class="line"><span>Template:     twentyfifteen</span></span>
<span class="line"><span>Description: Thème pour le cours &quot;Perfectionnez-vous sur WordPress&quot;</span></span>
<span class="line"><span>Version: 1.0</span></span>
<span class="line"><span>Tags: openclassrooms, cookinfamily, cours</span></span>
<span class="line"><span>Text Domain: cookinfamily</span></span>
<span class="line"><span>*/</span></span></code></pre></div><p>Theme Name : le nom du thème ;</p><p>Theme URI : l’URL du site utilisant le thème ;</p><p>Author : le développeur ou l’agence ayant développé le thème ;</p><p>Author URI : l’URL de l’auteur du thème ;</p><p>Description : une brève description du thème ;</p><p>Version : la version du thème ;</p><p>Tags : des mots clés pour affiner la recherche sur la page des thèmes ;</p><p>Text Domain : identifiant définissant le groupe de traduction de votre thème.</p><p>Template: thème parent</p><ul><li>On rajoute dans functions.php</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span> // Chargement du style.css du thème parent Twenty Twenty</span></span>
<span class="line"><span>    wp_enqueue_style(&#39;parent-style&#39;, get_template_directory_uri() . &#39;/style.css&#39;);</span></span>
<span class="line"><span>    // Chargement du css/theme.css pour nos personnalisations</span></span>
<span class="line"><span>    wp_enqueue_style(&#39;theme-style&#39;, get_stylesheet_directory_uri() . &#39;/css/theme.css&#39;, array(), filemtime(get_stylesheet_directory() . &#39;/css/theme.css&#39;));</span></span></code></pre></div><ul><li><p>On peut personnaliser directement sur l&#39;interface graphique de WP.</p></li><li><p>La fonction wp_enqueue_style accepte plusieurs arguments :</p><ul><li><p>$handle (string) (Requis) : Un identifiant unique pour la feuille de style. Cet identifiant est utilisé pour référencer cette feuille de style dans le reste de votre code.</p></li><li><p>$src (string) (Requis) : L&#39;URL vers le fichier CSS. Vous pouvez utiliser des fonctions comme get_stylesheet_uri(), get_template_directory_uri(), ou plugins_url() pour générer cette URL.</p></li><li><p>$deps (array) (Optionnel) : Un tableau des identifiants des autres styles dont ce style dépend. Par exemple, si votre style dépend de Bootstrap, vous pouvez ajouter l&#39;identifiant de Bootstrap ici.</p></li><li><p>$ver (string|bool|null) (Optionnel) : Le numéro de version de votre feuille de style. Ceci est utile pour la mise en cache. Si vous ne spécifiez pas de version, WordPress utilisera la version actuelle de WordPress. Si vous passez false, aucune version ne sera ajoutée.</p></li><li><p>$media (string) (Optionnel) : Le type de média pour lequel ce style a été conçu. Les valeurs courantes incluent &#39;all&#39;, &#39;screen&#39;, &#39;print&#39;, etc. Par défaut, il est réglé sur &#39;all&#39;.</p></li></ul></li><li><p>On peut rajouter un screenshot.png ds le dossier</p></li><li><p>On peut rajouter un dossier css/ et fichier theme.css pour personnalisation</p></li></ul><h2 id="les-hooks-de-wp" tabindex="-1">Les hooks de WP <a class="header-anchor" href="#les-hooks-de-wp" aria-label="Permalink to &quot;Les hooks de WP&quot;">​</a></h2><ul><li>Pour s&#39;accrocher à un moment du cycle de l&#39;affichage de la page</li><li>Dans functions.php</li><li>2 types : <ul><li>hooks <strong>filter</strong> : changer valeur grâce à une fct</li><li>hooks <strong>action</strong> : exécuter un script</li></ul></li></ul><h3 id="hooks-filter" tabindex="-1">Hooks filter <a class="header-anchor" href="#hooks-filter" aria-label="Permalink to &quot;Hooks filter&quot;">​</a></h3><ul><li>Exps de hooks filter : the_title, the_content, the_excerp</li><li>Conditions courantes : <ul><li>is_single() est une page de détail d&#39;un article</li><li>in_category(&#39;x&#39;)</li><li>in_the_loop()</li><li>is_archive() est une page d&#39;archive</li></ul></li><li>On utilise la fct add_filter(&#39;nom_du_hook&#39;,&#39;fct à exécuter&#39;)</li><li>get_the_permalink() =&gt; pour récupérer le lien du détail de l&#39;article ds un href par exp</li><li>Attention, il n&#39;y a pas forcémt besoin de hooks, cf interface de WP-&gt; Réglages</li></ul><h3 id="hooks-action" tabindex="-1">Hooks action <a class="header-anchor" href="#hooks-action" aria-label="Permalink to &quot;Hooks action&quot;">​</a></h3><ul><li>Exps de hooks action : loop_end, wp_header (ds le &lt;head&gt;), wp_footer(qd le DOM est chargé)</li><li>echo do_shortcode()</li><li>On utilise la fct add_action(&#39;nom_du_hook&#39;,&#39;act à exécuter&#39;)</li><li>Ds les fct on pt utiliser do_action(mon_action)</li><li>On pt copier des tpl ds tpl-parts et les rajouter grâce aux hooks action.</li><li>On pt utiliser les variables déclarées à l&#39;extèr avec global.</li></ul><p>A creuser c&#39;est quoi add_shortcode() -&gt; shortcode =&gt; syntaxe moins utilisée avec des [] , exp : [video] , remplacé par les blocs gutenberg</p><h2 id="creer-une-extension-plugin" tabindex="-1">Créer une extension /plugin <a class="header-anchor" href="#creer-une-extension-plugin" aria-label="Permalink to &quot;Créer une extension /plugin&quot;">​</a></h2><ul><li>On crée un dossier monPlugin/ ds wp-content/plugins</li><li>Dedans un fichier monplugin.php</li><li>On peut mettre du JS, du CSS...</li><li>En-tête = métadonnées du</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>&lt;?php</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span>* Plugin Name: Administration</span></span>
<span class="line"><span>* Plugin URI:  https://www.cookinfamily.fr</span></span>
<span class="line"><span>* Description: Ajoutez une page d&#39;administration pour modifier la couleur de fond de votre site WordPress.</span></span>
<span class="line"><span>* Version:     1.0.0</span></span>
<span class="line"><span>* Author:      OpenClassrooms</span></span>
<span class="line"><span>* Author URI:  https://openclassrooms.com</span></span>
<span class="line"><span>* Text Domain: administration</span></span>
<span class="line"><span>*/</span></span></code></pre></div><ul><li>L&#39;activer ds le dashboard</li><li>Créer une page d&#39;administration =&gt; config du plugin ds le dashboard</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>function administration_add_admin_page() {</span></span>
<span class="line"><span> add_submenu_page(</span></span>
<span class="line"><span>    &#39;options-general.php&#39;,</span></span>
<span class="line"><span>    &#39;Mes options&#39;,</span></span>
<span class="line"><span>    &#39;Mes réglages&#39;,</span></span>
<span class="line"><span>    &#39;manage_options&#39;,</span></span>
<span class="line"><span>    &#39;administration&#39;,</span></span>
<span class="line"><span>    &#39;administration_page&#39;</span></span>
<span class="line"><span> );</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>function administration_page() {</span></span>
<span class="line"><span> }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>add_action(&#39;admin_menu&#39;, &#39;administration_add_admin_page&#39;);</span></span></code></pre></div><h2 id="activer-le-mode-debug" tabindex="-1">Activer le mode debug <a class="header-anchor" href="#activer-le-mode-debug" aria-label="Permalink to &quot;Activer le mode debug&quot;">​</a></h2><ul><li>Dans wp-config.php define(&#39;WP_DEBUG&#39;, true); define(&#39;WP_DEBUG_LOG&#39;, true); define(&#39;WP_DEBUG_DISPLAY&#39;, false);</li></ul><h2 id="vsftpd" tabindex="-1">vsftpd <a class="header-anchor" href="#vsftpd" aria-label="Permalink to &quot;vsftpd&quot;">​</a></h2><p>sudo apt update &amp;&amp; sudo apt upgrade -y sudo apt install vsftpd -y sudo cp /etc/vsftpd.conf /etc/vsftpd.conf.bak sudo nano /etc/vsftpd.conf</p><ul><li>Modifiez les lignes suivantes (décommentez en supprimant le # et modifiez les valeurs si nécessaire) :</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>anonymous_enable=NO</span></span>
<span class="line"><span>local_enable=YES</span></span>
<span class="line"><span>write_enable=YES</span></span>
<span class="line"><span>local_umask=022</span></span>
<span class="line"><span>dirmessage_enable=YES</span></span>
<span class="line"><span>use_localtime=YES</span></span>
<span class="line"><span>xferlog_enable=YES</span></span>
<span class="line"><span>connect_from_port_20=YES</span></span>
<span class="line"><span>chroot_local_user=YES</span></span></code></pre></div><ul><li>Ajouter</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>allow_writeable_chroot=YES</span></span>
<span class="line"><span>user_sub_token=$USER</span></span>
<span class="line"><span>local_root=/home/$USER/ftp</span></span>
<span class="line"><span>pasv_min_port=10000</span></span>
<span class="line"><span>pasv_max_port=10100</span></span>
<span class="line"><span></span></span>
<span class="line"><span>sudo adduser ftpuser</span></span>
<span class="line"><span></span></span>
<span class="line"><span>sudo mkdir -p /home/ftpuser/ftp</span></span>
<span class="line"><span>sudo chown nobody:nogroup /home/ftpuser/ftp</span></span>
<span class="line"><span>sudo chmod a-w /home/ftpuser/ftp</span></span>
<span class="line"><span></span></span>
<span class="line"><span>sudo mkdir -p /home/ftpuser/ftp/upload</span></span>
<span class="line"><span>sudo chown ftpuser:ftpuser /home/ftpuser/ftp/upload</span></span>
<span class="line"><span></span></span>
<span class="line"><span>sudo systemctl restart vsftpd</span></span></code></pre></div><h2 id="deploiement" tabindex="-1">DEPLOIEMENT <a class="header-anchor" href="#deploiement" aria-label="Permalink to &quot;DEPLOIEMENT&quot;">​</a></h2><p>Je galère avec le ftp. Je suis donc passée par git clone et j&#39;ai copié mes fichiers à la mano. Il faut reconfigurer le fichier wp-config et les URL ca marche toujours pas</p>`,46),l=[p];function i(r,o,d,c,u,h){return a(),s("div",null,l)}const f=e(t,[["render",i]]);export{g as __pageData,f as default};
