<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>D√©ployer une SPA Vite | Fiches Dev Web</title>
    <meta name="description" content="Dev Web tutorials">
    <meta name="generator" content="VitePress v1.3.2">
    <link rel="preload stylesheet" href="/assets/style.B7C2H_ZE.css" as="style">
    
    <script type="module" src="/assets/app.C_sU-ynl.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.7VcAq9Mr.js">
    <link rel="modulepreload" href="/assets/chunks/framework.BXMoTSpH.js">
    <link rel="modulepreload" href="/assets/loic_deploy-vite-spa.md.DS_J6Bg7.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c8291ffa></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c8291ffa> Skip to content </a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar has-sidebar top" data-v-7ad780c2 data-v-9fd4d1dd><div class="wrapper" data-v-9fd4d1dd><div class="container" data-v-9fd4d1dd><div class="title" data-v-9fd4d1dd><div class="VPNavBarTitle has-sidebar" data-v-9fd4d1dd data-v-0ad69264><a class="title" href="/" data-v-0ad69264><!--[--><!--]--><!----><span data-v-0ad69264>Fiches Dev Web</span><!--[--><!--]--></a></div></div><div class="content" data-v-9fd4d1dd><div class="content-body" data-v-9fd4d1dd><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9fd4d1dd><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9fd4d1dd data-v-afb2845e><span id="main-nav-aria-label" class="visually-hidden" data-v-afb2845e> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/index.html" tabindex="0" data-v-afb2845e data-v-08fbf4b6><!--[--><span data-v-08fbf4b6>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/les_autres.html" tabindex="0" data-v-afb2845e data-v-08fbf4b6><!--[--><span data-v-08fbf4b6>Feat.</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/markdown-examples.html" tabindex="0" data-v-afb2845e data-v-08fbf4b6><!--[--><span data-v-08fbf4b6>Examples</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-9fd4d1dd data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9fd4d1dd data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/lorlor31" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-358b6670><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9fd4d1dd data-v-f953d92f data-v-af5898d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-af5898d3><span class="vpi-more-horizontal icon" data-v-af5898d3></span></button><div class="menu" data-v-af5898d3><div class="VPMenu" data-v-af5898d3 data-v-20ed86d6><!----><!--[--><!--[--><!----><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/lorlor31" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-358b6670><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9fd4d1dd data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-9fd4d1dd><div class="divider-line" data-v-9fd4d1dd></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2488c25a><span class="vpi-align-left menu-icon" data-v-2488c25a></span><span class="menu-text" data-v-2488c25a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-883964e0><button data-v-883964e0>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-d8b57b2d data-v-42c4c606><div class="curtain" data-v-42c4c606></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-42c4c606><span class="visually-hidden" id="sidebar-aria-label" data-v-42c4c606> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0" data-v-51288d80 data-v-edd2eed8><div class="item" role="button" tabindex="0" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><h2 class="text" data-v-edd2eed8>Examples</h2><!----></div><div class="items" data-v-edd2eed8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/markdown-examples.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Markdown Examples</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/api-examples.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Runtime API Examples</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-sidebar has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-f610f197><div class="content" data-v-f610f197><div class="outline-marker" data-v-f610f197></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f610f197>On this page</div><ul class="VPDocOutlineItem root" data-v-f610f197 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _loic_deploy-vite-spa" data-v-e6f2a212><div><h1 id="deployer-une-spa-vite" tabindex="-1">D√©ployer une SPA Vite <a class="header-anchor" href="#deployer-une-spa-vite" aria-label="Permalink to &quot;D√©ployer une SPA Vite&quot;">‚Äã</a></h1><blockquote><p>‚ÑπÔ∏è Tout au long de ce tutoriel, tu rencontreras des sections &quot;SPOILER&quot; que tu pourras d√©plier pour obtenir des explications sur ce que tu fais et pourquoi tu le fais.</p></blockquote><h2 id="etape-0-la-vm-server-kourou" tabindex="-1">√âtape 0 : La VM Server Kourou <a class="header-anchor" href="#etape-0-la-vm-server-kourou" aria-label="Permalink to &quot;√âtape 0 : La VM Server Kourou&quot;">‚Äã</a></h2><details><summary>SPOILER: C&#39;est quoi la VM Server Kourou ?</summary><p>Si tu dormais pendant la saison 8 du socle (ou si tu as beaucoup dormi depuis), voici un bref rappel de ce qu&#39;est la VM Server Kourou :</p><blockquote><p>O&#39;clock met √† ta disposition un serveur virtuel dans le ‚òÅÔ∏è cloud ‚òÅÔ∏è pour t&#39;aider √† t&#39;entra√Æner au d√©ploiement de tes projets web et √† l&#39;administration syst√®me. Ce serveur virtuel t&#39;est fourni avec un nom de domaine.</p></blockquote></details><p>üòâ Rends-toi sur la page d&#39;administration de ta VM Server Kourou, tu en auras besoin pour la suite de ce tutoriel : <a href="https://kourou.oclock.io/ressources/vm-cloud/" target="_blank" rel="noreferrer">https://kourou.oclock.io/ressources/vm-cloud/</a></p><blockquote><p>‚ÑπÔ∏è Certaines commandes de ce tutoriel te demanderont le mot de passe administrateur de ta VM Server Kourou, tu trouveras celui-ci sur la page d&#39;administration.</p></blockquote><h3 id="initialiser-la-vm" tabindex="-1">Initialiser la VM <a class="header-anchor" href="#initialiser-la-vm" aria-label="Permalink to &quot;Initialiser la VM&quot;">‚Äã</a></h3><details><summary>SPOILER: Premiers pas</summary><p>Si tu n&#39;as jamais utilis√© la VM Server Kourou ou si tu l&#39;as supprim√©e, clique sur le bouton &quot;Cr√©er la VM&quot;.</p><p>Pour repartir d&#39;une VM vierge, clique sur le bouton &quot;R√©installer la VM&quot;.</p><p>‚ö†Ô∏è Dans ces deux cas, tu devras cr√©er une nouvelle cl√© SSH sur la VM Server Kourou pour pouvoir cloner et pull le projet depuis GitHub. Tu trouveras la proc√©dure √† suivre dans la <a href="https://kourou.oclock.io/ressources/fiche-recap/git-et-github/#cr%c3%a9er-une-cl%c3%a9-ssh-pour-github" target="_blank" rel="noreferrer">fiche r√©cap d√©di√©e √† Git et GitHub</a>.</p></details><p>Si ta VM est d√©j√† pr√™te, clique sur &quot;D√©marrer la VM&quot;.</p><h3 id="se-connecter-a-la-vm" tabindex="-1">Se connecter √† la VM <a class="header-anchor" href="#se-connecter-a-la-vm" aria-label="Permalink to &quot;Se connecter √† la VM&quot;">‚Äã</a></h3><p>Une fois la VM Server d√©marr√©e, connecte-toi en SSH. Tu trouveras la commande √† utiliser dans ton terminal sur la page d&#39;administration de ta VM, elle devrait ressembler √† ceci :</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> student@pseudo-server.eddi.cloud</span></span></code></pre></div><p>‚ö†Ô∏è Tout le temps de ta connexion √† la VM, <strong><em>ne ferme surtout pas la page d&#39;administration</em></strong> car c&#39;est elle qui permet d&#39;autoriser la connexion depuis ton IP !</p><h2 id="etape-1-installer-l-environnement-de-production" tabindex="-1">√âtape 1 : Installer l&#39;environnement de production <a class="header-anchor" href="#etape-1-installer-l-environnement-de-production" aria-label="Permalink to &quot;√âtape 1 : Installer l&#39;environnement de production&quot;">‚Äã</a></h2><p>Avoir un serveur, c&#39;est bien üëç, mais avoir un serveur capable de servir notre application, c&#39;est mieux üíØ</p><details><summary>SPOILER: C&#39;est quoi, une app Vite ?</summary> En fin de compte, une SPA avec Vite, ce n&#39;est qu&#39;un ensemble de fichiers HTML, JavaScript, CSS et √©ventuellement des images. C&#39;est-√†-dire : un site statique ! <p>Et pour servir un site statique, on n&#39;a besoin que d&#39;un serveur HTTP, comme Apache (c&#39;est un des plus utilis√©s).</p><p>Mais la particularit√© de React / Svelte, c&#39;est que le code doit √™tre transpil√©, c&#39;est-√†-dire traduit, pour √™tre utilis√© par un navigateur. Les fichiers JSX et Svelte sont transpil√©s en JavaScript, SCSS et PostCSS transpilent vers CSS, etc. Et cette transpilation se fait au moyen de transpileurs souvent cod√©s en JavaScript, n√©cessitant NodeJS pour pouvoir √™tre ex√©cut√©s dans un terminal.</p><p>Tu vas donc avoir besoin de Node et d&#39;un gestionnaire de d√©pendances pour g√©n√©rer les fichiers statiques de ton projet, c&#39;est ce qu&#39;on appelle la phase de &quot;build&quot; (üá¨üáß <em>build</em> = üá´üá∑ <em>construire</em>). Pour √™tre coh√©rent avec la sp√© React, tu vas utiliser Yarn, mais tu pourrais tr√®s bien utiliser NPM par exemple, comme ce sera le cas si tu as suivi la sp√© i++.</p></details><h3 id="installation-de-node" tabindex="-1">Installation de Node <a class="header-anchor" href="#installation-de-node" aria-label="Permalink to &quot;Installation de Node&quot;">‚Äã</a></h3><blockquote><p>‚ÑπÔ∏è Tu vas installer Node sur ta VM Server Kourou avec <a href="https://github.com/nvm-sh/nvm" target="_blank" rel="noreferrer">Node Version Manager</a>, un outil qui permet d&#39;installer et d&#39;utiliser rapidement n&#39;importe quelle version de Node. Ainsi, tu t&#39;assures que tu ex√©cuteras la version stable la plus r√©cente de Node.</p></blockquote><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bash</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.bashrc</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nvm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --lts</span></span></code></pre></div><details><summary>SPOILER: D√©tail des commandes</summary><p>D&#39;abord, on t√©l√©charge le script d&#39;installation de NVM et on l&#39;ex√©cute avec l&#39;interpr√®te Bash (m√™me programme qui interpr√®te les commandes que tu entres dans ton terminal üòâ). Ce script va t√©l√©charger NVM, l&#39;installer dans le r√©pertoire personnel de l&#39;utilisateur actuel et ajouter l&#39;alias de commande <code>nvm</code> pour ce m√™me utilisateur.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bash</span></span></code></pre></div><p>On dit √† l&#39;interpr√©teur Bash du terminal de recharger le fichier <code>.bashrc</code> de l&#39;utilisateur, car celui-ci contient notamment l&#39;alias de commande <code>nvm</code> qu&#39;on va devoir utiliser ensuite. Sans ce rechargement, il faudrait se d√©connecter et se reconnecter √† la VM pour avoir acc√®s √† la commande <code>nvm</code>.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.bashrc</span></span></code></pre></div><p>On utilise NVM pour installer la derni√®re version stable de Node et l&#39;utiliser. Une fois cette commande ex√©cut√©e, tu peux v√©rifier la version de Node utilis√©e avec la commande <code>node --version</code>.</p><div class="language-bts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>nvm install --lts</span></span></code></pre></div></details><h3 id="installation-de-yarn-si-tu-utilises-yarn" tabindex="-1">Installation de Yarn (si tu utilises Yarn) <a class="header-anchor" href="#installation-de-yarn-si-tu-utilises-yarn" aria-label="Permalink to &quot;Installation de Yarn (si tu utilises Yarn)&quot;">‚Äã</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -sS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://dl.yarnpkg.com/debian/pubkey.gpg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt-key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;deb https://dl.yarnpkg.com/debian/ stable main&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/apt/sources.list.d/yarn.list</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --no-install-recommends</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yarn</span></span></code></pre></div><details><summary>SPOILER: D√©tail des commandes</summary><p>Comme on veut installer Yarn depuis le d√©p√¥t (= catalogue de logiciels) officiel de Yarn, on doit ajouter les cl√©s de s√©curit√© et l&#39;URL de ce d√©p√¥t aux registres de catalogues et de cl√©s du syst√®me d&#39;exploitation de la VM. Concr√®tement, ceci permettra d&#39;utiliser le gestionnaire de programmes de la VM pour installer Yarn. La premi√®re commande g√®re la cl√© de s√©curit√©, la seconde ajoute le d√©p√¥t officiel de Yarn aux d√©p√¥ts reconnus par la VM.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -sS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://dl.yarnpkg.com/debian/pubkey.gpg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt-key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;deb https://dl.yarnpkg.com/debian/ stable main&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/apt/sources.list.d/yarn.list</span></span></code></pre></div><p>Avant toute installation d&#39;un nouveau programme, on met √† jour les informations des logiciels disponibles via le gestionnaire de logiciels <code>apt</code>.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span></code></pre></div><p>On installe Yarn. Comme on a mis √† jour la liste des logiciels disponibles apr√®s avoir ajout√© le d√©p√¥t officiel, <code>apt</code> ira t√©l√©charger et installer Yarn depuis ce dernier. Ici, l&#39;option <code>-y</code> √©vite d&#39;avoir √† confirmer manuellement l&#39;installation et l&#39;option <code>--no√®install-recommends</code> fait en sorte que Node ne sera pas install√© avec Yarn (c&#39;est ce qu&#39;on veut parce qu&#39;on a d√©j√† install√© Node avec NVM).</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --no-install-recommends</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yarn</span></span></code></pre></div></details><h3 id="installation-d-apache" tabindex="-1">Installation d&#39;Apache <a class="header-anchor" href="#installation-d-apache" aria-label="Permalink to &quot;Installation d&#39;Apache&quot;">‚Äã</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apache2</span></span></code></pre></div><details><summary>SPOILER: D√©tail de la commande</summary><p>On installe le serveur HTTP Apache avec le gestionnaire de logiciels de la VM <code>apt</code>. Si tu avais d√©j√† fait cette op√©ration en saison 8, ne t&#39;en fais pas, cette commande ne fera rien, ou elle fera juste une mise √† jour d&#39;Apache si une version plus r√©cente est disponible.</p></details><h2 id="etape-2-recuperer-le-projet" tabindex="-1">√âtape 2 : R√©cup√©rer le projet <a class="header-anchor" href="#etape-2-recuperer-le-projet" aria-label="Permalink to &quot;√âtape 2 : R√©cup√©rer le projet&quot;">‚Äã</a></h2><h3 id="preparation-du-repo" tabindex="-1">Pr√©paration du repo <a class="header-anchor" href="#preparation-du-repo" aria-label="Permalink to &quot;Pr√©paration du repo&quot;">‚Äã</a></h3><p><strong>Depuis ta VM locale (T√©l√©porteur / VM cloud)</strong> cr√©e le fichier <code>public/.htaccess</code> dans ton projet et copie ce contenu √† l&#39;int√©rieur :</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>RewriteEngine on</span></span>
<span class="line"><span>RewriteCond %{REQUEST_FILENAME} !-f</span></span>
<span class="line"><span>RewriteRule ^.*$ index.html [QSA,L]</span></span></code></pre></div><p>Commit et push üì® ce fichier, il est indispensable pour la suite !</p><details><summary>SPOILER: SPA, routing et r√©√©criture d&#39;URL</summary><p>Dans une SPA avec, la navigation est la plupart du temps intercept√©e et g√©r√©e par un routeur (<code>react-router</code> dans le cas de React, ou le routeur propre au framework dans le cas de Svelte). √áa signifie que lorsqu&#39;un utilisateur change de page dans ton application, le changement d&#39;URL est contr√¥l√© par ce routeur, qui emp√™che le chargement d&#39;une nouvelle page et remplace juste le contenu de la page actuelle.</p><p>Mais que se passe-t-il si on essaie d&#39;acc√©der directement √† une autre URL que celle de la page d&#39;accueil de ton application ? Avec le serveur de d√©veloppement de Vite, tout se passe bien, l&#39;application est bien initialis√©e et ce sont directement les composants de la page correspondant √† l&#39;URL qui sont charg√©s. Cependant, ce ne sera pas le cas avec un serveur HTTP classique une fois qu&#39;on aura transform√© ton application en site statique. En effet, le serveur ne saura pas qu&#39;il servira une SPA avec un routeur qui agit c√¥t√© client (et, entre nous, le serveur, il s&#39;en fiche ü§∑) ; on doit donc lui dire de toujours servir au client le fichier qui permet d&#39;initialiser la SPA et son routeur quand on lui demande une URL qui ne correspond √† aucun fichier existant.</p><p>Dans le r√©sultat du build, ce fichier, ce sera le fichier <code>index.html</code>. La configuration Apache ci-dessus indiquent, dans l&#39;ordre :</p><ul><li>d&#39;activer le moteur de r√©√©criture d&#39;URL</li><li>que si l&#39;URL de la requ√™te HTTP ne correspond √† aucun fichier existant‚Ä¶</li><li>‚Ä¶alors il faut servir le contenu du fichier <code>index.html</code> (l&#39;option <code>QSA</code> permet de pr√©server les param√®tres d&#39;URL, et l&#39;option <code>L</code> indique au moteur d&#39;URL d&#39;arr√™ter de chercher d&#39;autres r√®gles de r√©√©criture apr√®s celle-ci)</li></ul><p>En r√©sum√©, ce fichier <code>.htaccess</code> permet de faire en sorte que peu importe l&#39;URL par laquelle on acc√®dera √† ton application, c&#39;est bien la SPA et le routeur c√¥t√© client qui g√®reront l&#39;affichage de la page, ou l&#39;erreur si jamais la page n&#39;existe pas.</p></details><blockquote><p>‚ö†Ô∏è Il est fortement conseill√© de mettre tout le code √† d√©ployer sur la branche principale (<code>main</code> ou <code>master</code>) √† ce stade, car c&#39;est elle qu&#39;on va utiliser pour le d√©ploiement. En g√©n√©ral, on fait √ßa avec une pull request.</p></blockquote><h3 id="clonage-du-repo" tabindex="-1">Clonage du repo <a class="header-anchor" href="#clonage-du-repo" aria-label="Permalink to &quot;Clonage du repo&quot;">‚Äã</a></h3><p><strong>De retour sur la VM Server Kourou</strong>, on r√©cup√®re le code de l&#39;application (‚ö†Ô∏è <strong><em>pense √† remplacer <code>&lt;URL&gt;</code> par l&#39;URL de clonage de ton repo !!!</em></strong>) :</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chmod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -R</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> o+w</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/www</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/www</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">UR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">L</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app.site</span></span></code></pre></div><details><summary>SPOILER: D√©tail des commandes</summary><p>Par d√©faut, seul le superutilisateur <code>root</code> a le droit d&#39;√©criture dans le r√©pertoire <code>/var/www</code>. Or, tu es connect√© √† ta VM en tant que l&#39;utilisateur <code>student</code> (tu pensais pas qu&#39;on allait te donner tous les droits, hein ?üòè), on modifie donc les droits d&#39;√©criture pour que les &quot;autres&quot; utilisateurs comme <code>student</code> puissent modifier le contenu du r√©pertoire.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chmod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -R</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> o+w</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/www</span></span></code></pre></div><p>L√†, rien qu&#39;on ne conna√Æt pas, on se place juste dans le r√©pertoire <code>/var/www</code>. Pourquoi ce r√©pertoire ? Parce que, par convention, c&#39;est le r√©pertoire dans lequel on met les fichiers des sites qui peuvent √™tre servis par un serveur web. On pourrait utiliser un autre r√©pertoire, mais Apache a d√©j√† configur√© ses droits sur ce r√©pertoire quand il a √©t√© install√©.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/www</span></span></code></pre></div><p>L√† encore, la commande doit t&#39;√™tre assez famili√®re. La nouveaut√© ici, c&#39;est qu&#39;on utilise le deuxi√®me param√®tre de la commande <code>git clone</code> qui permet de sp√©cifier le nom du r√©pertoire dans lequel Git va cloner le repo. Tu peux utiliser celui qui te convient le mieux mais tu devras alors adapter les commandes et la configuration du virtual host dans ce qui suit. <strong><em>Pense bien √† remplacer <code>&lt;URL&gt;</code> par l&#39;URL que tu utilises pour cloner ton repo.</em></strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">UR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">L</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app.site</span></span></code></pre></div></details><blockquote><p>‚ö†Ô∏è Si Git n&#39;a pas acc√®s au repo GitHub, assure-toi d&#39;avoir g√©n√©r√© une cl√© SSH sur la VM Server Kourou et de l&#39;avoir enregistr√©e dans ton compte GitHub : <a href="https://kourou.oclock.io/ressources/fiche-recap/git-et-github/#cr%c3%a9er-une-cl%c3%a9-ssh-pour-github" target="_blank" rel="noreferrer">https://kourou.oclock.io/ressources/fiche-recap/git-et-github/#cr√©er-une-cl√©-ssh-pour-github</a></p></blockquote><h3 id="build-du-projet-pour-la-production" tabindex="-1">Build du projet pour la production <a class="header-anchor" href="#build-du-projet-pour-la-production" aria-label="Permalink to &quot;Build du projet pour la production&quot;">‚Äã</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app.site</span></span></code></pre></div><p>Si tu utilises <strong>NPM</strong> :</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span></code></pre></div><p>Si tu utilises <strong>Yarn</strong> :</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span></code></pre></div><details><summary>SPOILER: D√©tail des commandes</summary><p>Encore une fois, rien de tr√®s sorcier, on se place juste dans le r√©pertoire dans lequel tu as clon√© ton repo. Apr√®s cette commande, tu peux utiliser <code>git checkout</code> pour te mettre sur la branche ou le tag que tu souhaites d√©ployer, si ce n&#39;est pas la branche principale.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app.site</span></span></code></pre></div><p>On installe les d√©pendances du projet.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><p><em>NOTE :</em> <code>yarn</code> fonctionne aussi √† la place de <code>yarn install</code></p><p>Enfin, on lance le build du projet. Cette commande va transpiler tout ton code et ses d√©pendances en un ensemble de fichiers statiques dans le r√©pertoire <code>dist/</code> √† la racine de ton repo. Si tu regardes √† l&#39;int√©rieur de ce r√©pertoire, tu t&#39;apercevras que le fichier <code>.htaccess</code> y a √©galement √©t√© copi√© (l&#39;original est toujours dans <code>public/</code>). Tu n&#39;as pas besoin de commit le contenu de <code>dist/</code>.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span></code></pre></div></details><h2 id="etape-3-configurer-le-virtual-host" tabindex="-1">√âtape 3 : Configurer le <em>virtual host</em> <a class="header-anchor" href="#etape-3-configurer-le-virtual-host" aria-label="Permalink to &quot;√âtape 3 : Configurer le _virtual host_&quot;">‚Äã</a></h2><h3 id="pointage-du-virtual-host-par-defaut-sur-le-repertoire-du-projet" tabindex="-1">Pointage du virtual host par d√©faut sur le r√©pertoire du projet <a class="header-anchor" href="#pointage-du-virtual-host-par-defaut-sur-le-repertoire-du-projet" aria-label="Permalink to &quot;Pointage du virtual host par d√©faut sur le r√©pertoire du projet&quot;">‚Äã</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s#\/var\/www\/html#/var/www/app.site/dist\n\n\t&lt;Directory /var/www/app.site/dist&gt;\n\t\tAllowOverride all\n\t&lt;/Directory&gt;#g&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/apache2/sites-available/000-default.conf</span></span></code></pre></div><details><summary>SPOILER: D√©tail de la commande</summary><p>J&#39;avoue, cette commande est carr√©ment barbare üßå et, entre nous, franchement pas jolie ü´†</p><p>Il faut savoir que le serveur Apache peut g√©rer plusieurs sites √† la fois sur une m√™me machine. Pour ce faire, il utilise ce qu&#39;on appelle des &quot;virtual hosts&quot;, c&#39;est-√†-dire qu&#39;il configure la mani√®re dont il doit servir les fichiers des diff√©rents r√©pertoires des sites concern√©s de mani√®re atomique et isol√©e.</p><p>√Ä l&#39;installation, Apache n&#39;a qu&#39;un virtual host configur√©, qui est sont virtual host par d√©faut. Le fichier de configuration de ce virtual host est, pour la version Debian/Ubuntu d&#39;Apache, <code>/etc/apache2/sites-available/000-default.conf</code>. Si tu regardes le contenu de ce fichier avant d&#39;ex√©cuter la commande donn√©e, tu remarqueras la ligne suivante :</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>DocumentRoot /var/www/html</span></span></code></pre></div><p>Cette ligne indique que pour ce virtual host, Apache doit servir les fichiers qui se trouvent dans le r√©pertoire <code>/var/www/html</code>. Dans ton cas, nous voulons servir les fichiers depuis le r√©pertoire <code>dist/</code> cr√©√© pr√©c√©demment par le build de ton application. La commande modifie donc cette ligne en :</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>DocumentRoot /var/www/app.site/dist</span></span></code></pre></div><p>Mais ce n&#39;est pas tout ! Tu te souviens du fichier <code>.htaccess</code> ?</p><p>Il s&#39;agit d&#39;un fichier de configuration Apache qui permet de surcharger certaines parties de la configuration du serveur ou du virtual host. Par d√©faut, ce fichier n&#39;est pas pris en compte par Apache. La commande ajoute donc sa prise en charge en ajoutant aussi dans la configuration du virtual host ces lignes :</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>&lt;Directory /var/www/app.site/dist&gt;</span></span>
<span class="line"><span>    AllowOverride all</span></span>
<span class="line"><span>&lt;/Directory&gt;</span></span></code></pre></div><p>Elles sp√©cifient que dans le r√©pertoire <code>/var/www/app.site/dist</code> et ses sous-r√©pertoires, Apache doit tenir compte de toutes les directives de configuration qui se trouvent dans des fichiers <code>.htaccess</code>. Sans √ßa, notre <code>.htaccess</code> ne servirait √† rien.</p><blockquote><p>‚ùì<strong>Pourquoi utiliser un <code>.htaccess</code> au lieu de tout mettre dans la configuration du virtual host ?</strong></p><p>Le souci avec la configuration du virtual host, c&#39;est que pour des raisons de s√©curit√©, les h√©bergeurs limitent souvent sa modification √† quelques directives (le <code>DocumentRoot</code> la plupart du temps, et √©ventuellement quelques autres). En revanche, la plupart des directives de configuration courantes telles que la r√©√©criture d&#39;URL sont g√©n√©ralement autoris√©es et prises en compte via les fichiers <code>.htaccess</code>. En embarquant la configuration du traitement des URL, propre √† l&#39;application ind√©pendamment du serveur sur lequel elle est d√©ploy√©e, plut√¥t que dans la configuration du virtual host, on s&#39;assure de sa portabilit√©.</p></blockquote></details><h3 id="activation-du-module-de-reecriture-d-url" tabindex="-1">Activation du module de r√©√©criture d&#39;URL <a class="header-anchor" href="#activation-du-module-de-reecriture-d-url" aria-label="Permalink to &quot;Activation du module de r√©√©criture d&#39;URL&quot;">‚Äã</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a2enmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rewrite</span></span></code></pre></div><details><summary>SPOILER: D√©tail de la commande</summary><p>Ici, on active le module de r√©√©criture d&#39;URL d&#39;Apache. Celui-ci n&#39;est g√©n√©ralement pas activ√© par d√©faut sur une installation vierge, il faut donc l&#39;activer pour que nos r√®gles de r√©√©criture d&#39;URL soient prises en compte.</p><p>Si tu as d√©j√† activ√© ce module, cette commande ne fera rien et t&#39;indiquera juste que le module est d√©j√† activ√©. üôÇ</p></details><h3 id="redemarrer-le-serveur-apache" tabindex="-1">Red√©marrer le serveur Apache <a class="header-anchor" href="#redemarrer-le-serveur-apache" aria-label="Permalink to &quot;Red√©marrer le serveur Apache&quot;">‚Äã</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apache2</span></span></code></pre></div><details><summary>SPOILER: D√©tail de la commande</summary><p>Le serveur Apache ne charge ses fichiers de configuration qu&#39;une seule fois, au d√©marrage. Comme tu viens de modifier un virtual host et d&#39;activer un de ses modules, tu dois red√©marrer Apache pour qu&#39;il recharger sa configuration. Si tu n&#39;as pas introduit d&#39;erreur dans la configuration du virtual host, cette commande ne devrait produire aucun message.</p></details><h2 id="etape-4-contempler-son-oelig-uvre-ü§©" tabindex="-1">√âtape 4 : Contempler son ≈ìuvre ü§© <a class="header-anchor" href="#etape-4-contempler-son-oelig-uvre-ü§©" aria-label="Permalink to &quot;√âtape 4 : Contempler son &amp;oelig;uvre ü§©&quot;">‚Äã</a></h2><p>Tu dois normalement pouvoir te rendre sur <code>http://&lt;pseudo&gt;-server.eddi.cloud</code> et voir ta SPA en production.</p><p>Alors, heureux¬∑se ?</p><h2 id="etape-5-mettre-a-jour-l-application-en-production" tabindex="-1">√âtape 5 : Mettre √† jour l&#39;application en production <a class="header-anchor" href="#etape-5-mettre-a-jour-l-application-en-production" aria-label="Permalink to &quot;√âtape 5 : Mettre √† jour l&#39;application en production&quot;">‚Äã</a></h2><p>Pour mettre √† jour la version de ton application en production, connecte-toi √† ta VM Server Cloud, puis :</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/www/app.site</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span></span></code></pre></div><p>Et enfin, si tu utilises <strong>NPM</strong> :</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npm install</span></span>
<span class="line"><span>npm run build</span></span></code></pre></div><p>Ou, si tu utilises <strong>Yarn</strong> :</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>yarn install</span></span>
<span class="line"><span>yarn build</span></span></code></pre></div><details><summary>SPOILER: D√©tail des commandes</summary><p>Place-toi dans le r√©pertoire dans lequel tu as clon√© ton repo.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/www/app.site</span></span></code></pre></div><p>Mets √† jour ton repo en r√©cup√©rant les derni√®res modifications depuis GitHub avec un pull. Tu peux en profiter pour te placer sur une autre branche ou un autre tag avec <code>git checkout</code> si c&#39;est ce que tu veux d√©ployer.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span></span></code></pre></div><p>Relance une installation des d√©pendances du projet pour t&#39;assurer d&#39;√™tre bien √† jour pour le build. C&#39;est surtout valable dans le cas o√π une nouvelle lib a √©t√© ajout√©e au projet ou si une d√©pendance a √©t√© elle-m√™me mise √† jour dans le projet.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><p>Lance un build de ton application pour reg√©n√©rer le r√©pertoire <code>dist/</code> (qui ne doit toujours pas √™tre commit).</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span></code></pre></div></details></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-1bcd8184><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><!----></div><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link next" href="/markdown-examples.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Next page</span><span class="title" data-v-1bcd8184>Markdown Examples</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"api-examples.md\":\"EODof_u0\",\"baptiste_02-deploiement-site-statique.md\":\"bRyYESc4\",\"baptiste_03-virtual-hosts.md\":\"woG2LEe6\",\"baptiste_04-deploiement-app-laravel.md\":\"B9FJRNs6\",\"baptiste_05-docker-install.md\":\"DpfQEWEY\",\"baptiste_06-docker-commandes-basiques.md\":\"4BP_Dy6g\",\"baptiste_07-docker-bind-mounts.md\":\"BA9u-L-6\",\"baptiste_08-docker-exec.md\":\"Hy1z3yZF\",\"baptiste_09-dockerfile.md\":\"D_x65KW9\",\"baptiste_10-docker-compose.md\":\"BHBuKYkq\",\"baptiste_11-docker-production.md\":\"Cb0jlwEK\",\"baptiste_12-orchestration.md\":\"Bfh-wT5Q\",\"baptiste_accessib_baptiste.md\":\"CxxPi8Z-\",\"baptiste_guide-images_accessib_baptiste.md\":\"BbfL_qGf\",\"baptiste_seo.md\":\"CsjTt59P\",\"cecile_e03_vers-react.md\":\"6_HYltbX\",\"cecile_e12_recap-react.md\":\"CndcJJLW\",\"cecile_e16_recap-redux.md\":\"r_OpEhvx\",\"cecile_e18_tests.md\":\"BCROcXU0\",\"cecile_e19_authentification.md\":\"8ShxDR-C\",\"cecile_e20_ouvertures.md\":\"BFcH5MXw\",\"cicd_ci-cd-definitions.md\":\"DOxgj-fP\",\"cicd_ci-cd-index.md\":\"CLhn-kJO\",\"cicd_ci-cd-runner-gitlab.md\":\"B7Rlr_Uf\",\"cicd_tips_pour_deployer_avec_un_runner.md\":\"CBBdh3_I\",\"index.md\":\"DxfLkx8X\",\"laravel_blade.md\":\"HRjyxKB8\",\"laravel_controllers.md\":\"BokSgoPj\",\"laravel_dossiers.md\":\"D08czA2y\",\"laravel_fonctionnalites.md\":\"1dn2Uarl\",\"laravel_install.md\":\"X65xVHmc\",\"laravel_models.md\":\"BGhmoq5u\",\"laravel_routes.md\":\"DdEk3091\",\"laure_install_php-vanilla.md\":\"CoO4cfNb\",\"laure_notions_dw.md\":\"C6RQwMTD\",\"loic_deploy-directus.md\":\"tgP4OCcd\",\"loic_deploy-https.md\":\"DtK62a7K\",\"loic_deploy-symfony.md\":\"BC6TfUVc\",\"loic_deploy-vite-spa.md\":\"DS_J6Bg7\",\"markdown-examples.md\":\"CV1SgZx1\",\"menus_baptiste.md\":\"C7H6p5jR\",\"menus_cecile.md\":\"CrrpPiHd\",\"menus_cicd.md\":\"DE4TI8gR\",\"menus_laravel.md\":\"aL17LXsi\",\"menus_les_autres.md\":\"CCmJrgsy\",\"menus_loic.md\":\"Bkt67_DW\",\"menus_mep.md\":\"CIXNB1Ua\",\"menus_symfony.md\":\"CzOja-yD\",\"mep_mise-en-prod-symfony.md\":\"B-7BvnFm\",\"mep_mise_en_prod_symfony_web_encore.md\":\"C1p99Ii_\",\"symfony_api_with_symfony.md\":\"kn-2kvIf\",\"symfony_mise-en-prod-symfony.md\":\"CD1_bIjg\",\"symfony_mise_en_prod_symfony_web_encore.md\":\"DPXKbiS1\",\"symfony_symfony_from_scratch.md\":\"BMzYsdNg\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Fiches Dev Web\",\"description\":\"Dev Web tutorials\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"Home\",\"link\":\"/index\"},{\"text\":\"Feat.\",\"link\":\"/les_autres\"},{\"text\":\"Examples\",\"link\":\"/markdown-examples\"}],\"sidebar\":[{\"text\":\"Examples\",\"items\":[{\"text\":\"Markdown Examples\",\"link\":\"/markdown-examples\"},{\"text\":\"Runtime API Examples\",\"link\":\"/api-examples\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/lorlor31\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>