<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DÃ©ployer une application Symfony | Fiches Dev Web</title>
    <meta name="description" content="Dev Web tutorials">
    <meta name="generator" content="VitePress v1.3.2">
    <link rel="preload stylesheet" href="/assets/style.D-NX1hNs.css" as="style">
    
    <script type="module" src="/assets/app.BjzipMsx.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.Z7IhMHdz.js">
    <link rel="modulepreload" href="/assets/chunks/framework.CEgrwLex.js">
    <link rel="modulepreload" href="/assets/loic_deploy-symfony.md.D4htCBmG.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c8291ffa></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c8291ffa> Skip to content </a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar has-sidebar top" data-v-7ad780c2 data-v-9fd4d1dd><div class="wrapper" data-v-9fd4d1dd><div class="container" data-v-9fd4d1dd><div class="title" data-v-9fd4d1dd><div class="VPNavBarTitle has-sidebar" data-v-9fd4d1dd data-v-0ad69264><a class="title" href="/" data-v-0ad69264><!--[--><!--]--><!----><span data-v-0ad69264>Fiches Dev Web</span><!--[--><!--]--></a></div></div><div class="content" data-v-9fd4d1dd><div class="content-body" data-v-9fd4d1dd><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9fd4d1dd><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9fd4d1dd data-v-afb2845e><span id="main-nav-aria-label" class="visually-hidden" data-v-afb2845e> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/index.html" tabindex="0" data-v-afb2845e data-v-08fbf4b6><!--[--><span data-v-08fbf4b6>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/menus/les_autres.html" tabindex="0" data-v-afb2845e data-v-08fbf4b6><!--[--><span data-v-08fbf4b6>Feat.</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-9fd4d1dd data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9fd4d1dd data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/lorlor31" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-358b6670><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9fd4d1dd data-v-f953d92f data-v-af5898d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-af5898d3><span class="vpi-more-horizontal icon" data-v-af5898d3></span></button><div class="menu" data-v-af5898d3><div class="VPMenu" data-v-af5898d3 data-v-20ed86d6><!----><!--[--><!--[--><!----><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/lorlor31" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-358b6670><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9fd4d1dd data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-9fd4d1dd><div class="divider-line" data-v-9fd4d1dd></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2488c25a><span class="vpi-align-left menu-icon" data-v-2488c25a></span><span class="menu-text" data-v-2488c25a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-883964e0><button data-v-883964e0>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-d8b57b2d data-v-42c4c606><div class="curtain" data-v-42c4c606></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-42c4c606><span class="visually-hidden" id="sidebar-aria-label" data-v-42c4c606> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0" data-v-51288d80 data-v-edd2eed8><div class="item" role="button" tabindex="0" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><h2 class="text" data-v-edd2eed8>Navigation Rapide</h2><!----></div><div class="items" data-v-edd2eed8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/menus/WP.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>WordPress</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/menus/mep.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>MEP</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/menus/laravel.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Laravel</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/menus/cecile.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>React</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/menus/baptiste.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Docker</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/menus/cicd.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>CI-CD</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/menus/symfony.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Symfony</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-sidebar has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-f610f197><div class="content" data-v-f610f197><div class="outline-marker" data-v-f610f197></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f610f197>On this page</div><ul class="VPDocOutlineItem root" data-v-f610f197 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _loic_deploy-symfony" data-v-e6f2a212><div><h1 id="deployer-une-application-symfony" tabindex="-1">DÃ©ployer une application Symfony <a class="header-anchor" href="#deployer-une-application-symfony" aria-label="Permalink to &quot;DÃ©ployer une application Symfony&quot;">â</a></h1><blockquote><p>â¹ï¸ Tout au long de ce tutoriel, tu rencontreras des sections &quot;SPOILER&quot; que tu pourras dÃ©plier pour obtenir des explications sur ce que tu fais et pourquoi tu le fais.</p></blockquote><h2 id="etape-0-la-vm-server-kourou" tabindex="-1">Ãtape 0 : La VM Server Kourou <a class="header-anchor" href="#etape-0-la-vm-server-kourou" aria-label="Permalink to &quot;Ãtape 0 : La VM Server Kourou&quot;">â</a></h2><details><summary>SPOILER: C&#39;est quoi la VM Server Kourou ?</summary><p>Si tu dormais pendant la saison 8 du socle (ou si tu as beaucoup dormi depuis), voici un bref rappel de ce qu&#39;est la VM Server Kourou :</p><blockquote><p>O&#39;clock met Ã  ta disposition un serveur virtuel dans le âï¸ cloud âï¸ pour t&#39;aider Ã  t&#39;entraÃ®ner au dÃ©ploiement de tes projets web et Ã  l&#39;administration systÃ¨me. Ce serveur virtuel t&#39;est fourni avec un nom de domaine.</p></blockquote></details><p>ð Rends-toi sur la page d&#39;administration de ta VM Server Kourou, tu en auras besoin pour la suite de ce tutoriel : <a href="https://kourou.oclock.io/ressources/vm-cloud/" target="_blank" rel="noreferrer">https://kourou.oclock.io/ressources/vm-cloud/</a></p><blockquote><p>â¹ï¸ Certaines commandes de ce tutoriel te demanderont le mot de passe administrateur de ta VM Server Kourou, tu trouveras celui-ci sur la page d&#39;administration.</p></blockquote><h3 id="initialiser-la-vm" tabindex="-1">Initialiser la VM <a class="header-anchor" href="#initialiser-la-vm" aria-label="Permalink to &quot;Initialiser la VM&quot;">â</a></h3><details><summary>SPOILER: Premiers pas</summary><p>Si tu n&#39;as jamais utilisÃ© la VM Server Kourou ou si tu l&#39;as supprimÃ©e, clique sur le bouton &quot;CrÃ©er la VM&quot;.</p><p>Pour repartir d&#39;une VM vierge, clique sur le bouton &quot;RÃ©installer la VM&quot;.</p><p>â ï¸ Dans ces deux cas, tu devras crÃ©er une nouvelle clÃ© SSH sur la VM Server Kourou pour pouvoir cloner et pull le projet depuis GitHub. Tu trouveras la procÃ©dure Ã  suivre dans la <a href="https://kourou.oclock.io/ressources/fiche-recap/git-et-github/#cr%c3%a9er-une-cl%c3%a9-ssh-pour-github" target="_blank" rel="noreferrer">fiche rÃ©cap dÃ©diÃ©e Ã  Git et GitHub</a>.</p></details><p>Si ta VM est dÃ©jÃ  prÃªte, clique sur &quot;DÃ©marrer la VM&quot;.</p><h3 id="se-connecter-a-la-vm" tabindex="-1">Se connecter Ã  la VM <a class="header-anchor" href="#se-connecter-a-la-vm" aria-label="Permalink to &quot;Se connecter Ã  la VM&quot;">â</a></h3><p>Une fois la VM Server dÃ©marrÃ©e, connecte-toi en SSH. Tu trouveras la commande Ã  utiliser dans ton terminal sur la page d&#39;administration de ta VM, elle devrait ressembler Ã  ceci :</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> student@pseudo-server.eddi.cloud</span></span></code></pre></div><p>â ï¸ Tout le temps de ta connexion Ã  la VM, <strong><em>ne ferme surtout pas la page d&#39;administration</em></strong> car c&#39;est elle qui permet d&#39;autoriser la connexion depuis ton IP !</p><h2 id="etape-1-installer-l-environnement-de-production" tabindex="-1">Ãtape 1 : Installer l&#39;environnement de production <a class="header-anchor" href="#etape-1-installer-l-environnement-de-production" aria-label="Permalink to &quot;Ãtape 1 : Installer l&#39;environnement de production&quot;">â</a></h2><h3 id="installation-du-sgbdr-mariadb-mysql" tabindex="-1">Installation du SGBDR MariaDB (MySQL) <a class="header-anchor" href="#installation-du-sgbdr-mariadb-mysql" aria-label="Permalink to &quot;Installation du SGBDR MariaDB (MySQL)&quot;">â</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mariadb-server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mariadb-client</span></span></code></pre></div><details><summary>SPOILER: DÃ©tail des commandes</summary><p>On commence par mettre Ã  jour les catalogues des logiciels disponibles sur le serveur (la commande <code>sudo</code> permet d&#39;excuter la commande avec les droits administrateur) :</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span></code></pre></div><p>Puis on installe les packages (logiciels) nÃ©cessaires pour gÃ©rer des bases de donnÃ©es sur le serveur :</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mariadb-server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mariadb-client</span></span></code></pre></div><p>Ici, on a choisi d&#39;installer MariaDB qui est une version open source de MySQL. On a besoin du package <code>mariadb-server</code> pour avoir un serveur de bases de donnÃ©es, ainsi que des outils fournis par le package <code>mariadb-client</code> (notamment la commande <code>mysql</code>) pour interagir avec ces bases de donnÃ©es.</p><p>L&#39;option <code>-y</code> permet de dire au logiciel <code>apt</code> qui sert Ã  gÃ©rer les packages installÃ©s sur le systÃ¨me de ne pas demander confirmation pour installer les packages demandÃ©s.</p></details><h3 id="installation-du-serveur-http-apache" tabindex="-1">Installation du serveur HTTP Apache <a class="header-anchor" href="#installation-du-serveur-http-apache" aria-label="Permalink to &quot;Installation du serveur HTTP Apache&quot;">â</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apache2</span></span></code></pre></div><details><summary>SPOILER: DÃ©tail de la commande</summary><p>Apache est le serveur HTTP que ton serveur va utiliser pour rendre ton application accessible au reste du monde. C&#39;est lui qui permettra de dialoguer avec des navigateurs web et qui exÃ©cutera les fichiers PHP.</p><p>Cette commande est la mÃªme que pour l&#39;installation du SGBDR, sauf qu&#39;on installe seulement le package <code>apache2</code> cette fois.</p></details><h3 id="installation-de-php-8" tabindex="-1">Installation de PHP 8 <a class="header-anchor" href="#installation-de-php-8" aria-label="Permalink to &quot;Installation de PHP 8&quot;">â</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php8.1-common</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php8.1-cli</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php8.1-mysql</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php8.1-intl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php8.1-xml</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> php8.1-zip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> libapache2-mod-php8.1</span></span></code></pre></div><details><summary>SPOILER: DÃ©tail de la commande</summary><p>Encore une fois, on installe des packages. Cette fois-ci, il s&#39;agit de PHP en lui-mÃªme, c&#39;est-Ã -dire l&#39;interprÃ©teur du code ainsi que certaines de ses extensions et modules :</p><ul><li><code>php8.1-common</code> est l&#39;interprÃ©teur PHP (version 8.1) en soi, il permet d&#39;exÃ©cuter du code PHP</li><li><code>php8.1-cli</code> fourni l&#39;interface en ligne de commande de PHP, te permettant ainsi d&#39;interagir avec l&#39;interprÃ©teur directement depuis le terminal</li><li><code>php8.1-mysql</code> est une extension de PHP qui fournit des drivers et des fonctions permettant au code d&#39;interagir avec des bases de donnÃ©es MySQL</li><li><code>php8.1-xml</code> est une extension de PHP qui introduit des fonctionnalitÃ©s de manipulation de donnÃ©es au format XML et ses dÃ©rivÃ©s (HTML, etc.), de telles structures sont utilisÃ©es par Symfony</li><li><code>php8.1-intl</code> est une extension de PHP dÃ©diÃ©e Ã  l&#39;internationalisation et la gestion de traductions, elle est requise par Symfony</li><li><code>php8.1-zip</code> est une extension de PHP qui lui permet de manipuler des archives ZIP, elle est notamment utilisÃ©e par Composer pour optimiser le tÃ©lÃ©chargement des dÃ©pendances</li><li><code>libapache2-mod-php8.1</code> est un module pour Apache qui lui permet d&#39;interagir avec l&#39;interprÃ©teur PHP, sans lui il serait impossible de passer les informations de la requÃªte HTTP Ã  PHP et de comprendre les rÃ©ponses gÃ©nÃ©rÃ©es par ton code</li></ul></details><h3 id="installation-de-composer" tabindex="-1">Installation de Composer <a class="header-anchor" href="#installation-de-composer" aria-label="Permalink to &quot;Installation de Composer&quot;">â</a></h3><blockquote><p>â¹ï¸ Cette procÃ©dure est directement tirÃ©e et adaptÃ©e de la <a href="https://getcomposer.org/download/" target="_blank" rel="noreferrer">documentation officielle de Composer</a></p></blockquote><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;copy(&#39;https://getcomposer.org/installer&#39;, &#39;composer-setup.php&#39;);&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> composer-setup.php</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;unlink(&#39;composer-setup.php&#39;);&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> composer.phar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/bin/composer</span></span></code></pre></div><details><summary>SPOILER: DÃ©tail des commandes</summary><p>La premiÃ¨re commande exÃ©cute du code PHP directement dans le terminal pour tÃ©lÃ©charger le script d&#39;installation de Composer et l&#39;enregistrer dans un fichier <code>composer-setup.php</code>.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;copy(&#39;https://getcomposer.org/installer&#39;, &#39;composer-setup.php&#39;);&quot;</span></span></code></pre></div><p>Ensuite, on utilise l&#39;interprÃ©teur PHP pour exÃ©cuter le script d&#39;installation (qui n&#39;est autreâ¦ qu&#39;un simple script PHP !).</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> composer-setup.php</span></span></code></pre></div><p>Une fois Composer installÃ©, on exÃ©cute du code PHP directement dans le terminal pour supprimer le script d&#39;installation, car on n&#39;en a plus besoin. Tu peux noter que la fonction <code>unlink()</code> en PHP sert Ã  supprimer un fichier, elle est directement hÃ©ritÃ©e du langage C.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;unlink(&#39;composer-setup.php&#39;);&quot;</span></span></code></pre></div><p>DerniÃ¨re Ã©tape dans l&#39;installation de Composer : rendre la commande <code>composer</code> accessible depuis n&#39;importe oÃ¹ sur ton serveur. En effet, le script d&#39;installation se contente de faire des vÃ©rifications quant Ã  ton installation de PHP, de tÃ©lÃ©charger une archive PHP (c&#39;est-Ã -dire un trÃ¨s gros script PHP exÃ©cutable dont le code a Ã©tÃ© optimisÃ© pour Ãªtre interprÃ©tÃ© rapidement) dans un fichier <code>composer.phar</code>. Pour rendre ce fichier exÃ©cutable partout, il suffit de le dÃ©placer dans le rÃ©pertoire systÃ¨me <code>/usr/local/bin</code> et de lui donner le nom de la commande via lequel on souhaite l&#39;exÃ©cuter, c&#39;est-Ã -dire <code>composer</code> dans notre cas.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> composer.phar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/bin/composer</span></span></code></pre></div></details><h2 id="etape-2-recuperer-le-projet" tabindex="-1">Ãtape 2 : RÃ©cupÃ©rer le projet <a class="header-anchor" href="#etape-2-recuperer-le-projet" aria-label="Permalink to &quot;Ãtape 2 : RÃ©cupÃ©rer le projet&quot;">â</a></h2><h3 id="preparation-du-repo" tabindex="-1">PrÃ©paration du repo <a class="header-anchor" href="#preparation-du-repo" aria-label="Permalink to &quot;PrÃ©paration du repo&quot;">â</a></h3><blockquote><p>â¹ï¸ Si le fichier <code>public/.htaccess</code> existe dÃ©jÃ  dans ton projet, tu peux directement passer Ã  l&#39;Ã©tape suivante</p></blockquote><p><strong>Depuis ta VM locale (TÃ©lÃ©porteur / VM cloud)</strong> exÃ©cute cette commande dans ton projet :</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> require</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> symfony/apache-pack</span></span></code></pre></div><p>Si ton terminal te demande de confirmer l&#39;exÃ©cution d&#39;une &quot;recipe&quot; Symfony pour le Symfony Apache Pack, accepte - ceci gÃ©nÃ¨rera le fichier <code>public/.htaccess</code> dans ton projet.</p><p>Commit et push ð¨ ce fichier, il est indispensable pour la suite !</p><h3 id="clonage-du-repo" tabindex="-1">Clonage du repo <a class="header-anchor" href="#clonage-du-repo" aria-label="Permalink to &quot;Clonage du repo&quot;">â</a></h3><p><strong>De retour sur la VM Server Kourou</strong>, on rÃ©cupÃ¨re le code de l&#39;application <strong>(â ï¸ <em>pense Ã  remplacer <code>&lt;URL&gt;</code> par l&#39;URL de clonage de ton repo !!!</em>)</strong> :</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chmod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -R</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> o+w</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/www</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/www</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">UR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">L</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app.site</span></span></code></pre></div><details><summary>SPOILER: DÃ©tails de la commande</summary><p>Le rÃ©pertoire dans lequel tu vas cloner ton repo est un rÃ©pertoire protÃ©gÃ© en Ã©criture, il faut donc te donner le droit d&#39;y modifier des fichiers et des dossiers.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chmod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -R</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> o+w</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/www</span></span></code></pre></div><p>On peut dÃ©composer cette commande ainsi :</p><ul><li><code>sudo</code> - on exÃ©cute la commande qui suit avec les droits administrateur</li><li><code>chmod</code> - commande qui permet de modifier les droits d&#39;une ressources (fichier ou rÃ©pertoire)</li><li><code>-R</code> - on indique que la modification s&#39;appliquera aussi aux fichiers et dossiers enfants, par <em>rÃ©cursivitÃ©</em></li><li><code>o+w</code> - il s&#39;agit de la modification des droits <ul><li><code>o</code> - on modifie les droits des &quot;autres utilisateurs&quot;, c&#39;est-Ã -dire ceux qui ne sont pas propriÃ©taires de la ressource</li><li><code>+</code> - on indique qu&#39;on ajoute les droits qui suivent</li><li><code>w</code> - droit d&#39;Ã©criture (ð¬ð§ <em>write</em> = ð«ð· <em>Ã©crire</em>)</li></ul></li><li><code>/var/www</code> - on spÃ©cifie le chemin de la ressource dont on modifie les droits, ici c&#39;est le rÃ©pertoire <code>/var/www</code></li></ul><p>Cette commande-ci devrait t&#39;Ãªtre familiÃ¨re, on ne fait que se placer dans un rÃ©pertoire prÃ©cis :</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/www</span></span></code></pre></div><p>Enfin, on clone dans <code>/var/www</code> ton repo pour ramener ton code sur ton serveur. Le deuxiÃ¨me argument de <code>git clone</code> te dÃ©concertera peut-Ãªtre, mais il sert seulement Ã  indiquer Ã  Git le nom du rÃ©pertoire dans lequel on souhaite cloner le repo. Ici, le rÃ©pertoire qui sera clonÃ© sera appelÃ© <code>app.site</code>, tu peux lui donner n&#39;importe quel nom mais il te faudra alors penser Ã  mettre le bon chemin dans les parties concernÃ©es plus tard dans ce tutoriel.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">UR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">L</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app.site</span></span></code></pre></div></details><blockquote><p>â ï¸ Si Git n&#39;a pas accÃ¨s au repo GitHub, assure-toi d&#39;avoir gÃ©nÃ©rÃ© une clÃ© SSH sur la VM Server Kourou et de l&#39;avoir enregistrÃ©e dans ton compte GitHub : <a href="https://kourou.oclock.io/ressources/fiche-recap/git-et-github/#cr%c3%a9er-une-cl%c3%a9-ssh-pour-github" target="_blank" rel="noreferrer">https://kourou.oclock.io/ressources/fiche-recap/git-et-github/#cr%c3%a9er-une-cl%c3%a9-ssh-pour-github</a></p></blockquote><h2 id="etape-3-preparer-le-projet-pour-la-production" tabindex="-1">Ãtape 3 : PrÃ©parer le projet pour la production <a class="header-anchor" href="#etape-3-preparer-le-projet-pour-la-production" aria-label="Permalink to &quot;Ãtape 3 : PrÃ©parer le projet pour la production&quot;">â</a></h2><h3 id="preparation-de-la-base-de-donnees" tabindex="-1">PrÃ©paration de la base de donnÃ©es <a class="header-anchor" href="#preparation-de-la-base-de-donnees" aria-label="Permalink to &quot;PrÃ©paration de la base de donnÃ©es&quot;">â</a></h3><p>Pour crÃ©er et configurer la base de donnÃ©es, tu vas utiliser MySQL en ligne de commande :</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span></span></code></pre></div><details><summary>SPOILER: DÃ©tail de la commande</summary><p>On utilise ici la commande <code>mysql</code> fournie par notre installation du package <code>mariadb-client</code> pour se connecter au serveur de bases de donnÃ©es. L&#39;option <code>-u</code> permet d&#39;indiquer le nom de l&#39;utilisateur avec lequel on souhaite se connecter.</p><p>Comme notre installation de MariaDB/MySQL est &quot;fraÃ®che&quot;, le serveur de bases de donnÃ©es ne comporte qu&#39;un seul utilisateur qui a tous les droits : <code>root</code>. Cependant, son utilisation est restreinte par dÃ©faut.</p><p>En effet, <code>root</code> ne peut se connecter que via le terminal et seulement si la commande <code>mysql</code> est utilisÃ©e avec les droits administrateur (via <code>sudo</code>). <strong>Tu ne pourras donc pas utiliser l&#39;utilisateur <code>root</code> pour te connecter Ã  ta base de donnÃ©es avec ton code !!!</strong></p></details><p>Tu devrais maintenant te trouver dans un shell MySQL, c&#39;est un peu comme le terminal de ton SGBDR Ã  l&#39;intÃ©rieur de ton terminal.</p><p>CrÃ©e d&#39;abord la base de donnÃ©es <strong>(â ï¸ <em>remplace <code>&lt;db&gt;</code> par le nom de ta BDD !!!</em>)</strong> :</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DATABASE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>CrÃ©e ensuite l&#39;utilisateur qui permettra Ã  ton code de se connecter Ã  ta base de donnÃ©es <strong>(â ï¸ <em>remplace <code>&lt;user&gt;</code> par le nom de l&#39;utilisateur et <code>&lt;password&gt;</code> par son mot de passe !!!</em>)</strong> :</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> USER </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&lt;user&gt;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;localhost&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IDENTIFIED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&lt;password&gt;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>Donne les droits Ã  l&#39;utilisateur sur la base de donnÃ©es <strong>(â ï¸ <em>remplace <code>&lt;db&gt;</code> par le nom de la BDD et <code>&lt;user&gt;</code> par le nom de l&#39;utilisateur !!!</em>)</strong> :</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GRANT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ALL PRIVILEGES </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ON</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TO</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&lt;user&gt;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;localhost&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">FLUSH PRIVILEGES;</span></span></code></pre></div><p>Sors du shell MySQL :</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EXIT;</span></span></code></pre></div><h3 id="preparation-du-env-local" tabindex="-1">PrÃ©paration du <code>.env.local</code> <a class="header-anchor" href="#preparation-du-env-local" aria-label="Permalink to &quot;PrÃ©paration du `.env.local`&quot;">â</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app.site</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">touch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env.local</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;APP_ENV=prod&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env.local</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;echo &quot;APP_SECRET=&quot;.bin2hex(random_bytes(16)).&quot;\n&quot;;&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env.local</span></span></code></pre></div><p>â ï¸ <strong><em>Pense Ã  remplacer <code>&lt;db&gt;</code> par le nom de ta base de donnÃ©es, <code>&lt;user&gt;</code> par le nom de l&#39;utilisateur que tu as crÃ©Ã© plus haut et <code>&lt;password&gt;</code> par son mot de passe !!!</em></strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;DATABASE_URL=&quot;mysql://&lt;user&gt;:&lt;password&gt;@localhost:3306/&lt;db&gt;?charset=utf8mb4&quot;&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env.local</span></span></code></pre></div><p>Si tu utilises LexikJWT :</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;echo &quot;JWT_PASSPHRASE=&quot;.bin2hex(random_bytes(16)).&quot;\n&quot;;&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env.local</span></span></code></pre></div><details><summary>SPOILER: DÃ©tail des commandes</summary><p>On se place dans le rÃ©pertoire du site :</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/www/app.site</span></span></code></pre></div><p>On crÃ©e le fichier <code>.env.local</code> :</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">touch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env.local</span></span></code></pre></div><p>On y ajoute la variable d&#39;environnement <code>APP_ENV</code> avec la valeur <code>prod</code> dans le fichier <code>.env.local</code>. C&#39;est ce qui va permettre de passer Symfony en mode &quot;production&quot;, dÃ©sactivant ainsi la barre de dÃ©bug et activant d&#39;autres features d&#39;optimisation comme la mise en cache des templates Twig prÃ©-compilÃ©s.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;APP_ENV=prod&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env.local</span></span></code></pre></div><p>On gÃ©nÃ¨re une nouvelle chaÃ®ne alÃ©atoire pour le chiffrement des cookies. Tu pourrais tout aussi bien utiliser la mÃªme chaÃ®ne que dans ton environnement de dÃ©veloppement mais il est recommandÃ© de faire en sorte que celle-ci soit propre Ã  chaque environnement pour maximiser la sÃ©curitÃ© du chiffrement.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;echo &quot;APP_SECRET=&quot;.bin2hex(random_bytes(16)).&quot;\n&quot;;&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env.local</span></span></code></pre></div><p>On insÃ¨re les informations de connexion Ã  la base de donnÃ©es sous la forme d&#39;une URL tel que recommandÃ© par la documentation de Symfony. Tu peux noter que dans un souci de simplification, la version du SGBDR a Ã©tÃ© omise ici (elle est facultative).</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;DATABASE_URL=&quot;mysql://&lt;user&gt;:&lt;password&gt;@localhost:3306/&lt;db&gt;?charset=utf8mb4&quot;&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env.local</span></span></code></pre></div><p>Dans la mÃªme veine que le <code>APP_SECRET</code>, tu peux gÃ©nÃ©rer une nouvelle passphrase pour les tokens JWT afin de maximiser l&#39;efficacitÃ© de leur chiffrement Ã  travers tes diffÃ©rents environnements.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;echo &quot;JWT_PASSPHRASE=&quot;.bin2hex(random_bytes(16)).&quot;\n&quot;;&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env.local</span></span></code></pre></div></details><h3 id="installation-du-projet" tabindex="-1">Installation du projet <a class="header-anchor" href="#installation-du-projet" aria-label="Permalink to &quot;Installation du projet&quot;">â</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --no-dev</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bin/console</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> doctrine:migrations:migrate</span></span></code></pre></div><details><summary>SPOILER: DÃ©tail des commandes</summary><p>L&#39;option <code>--no-dev</code> de <code>composer install</code> permet de ne pas installer les dÃ©pendances qui ne servent qu&#39;au dÃ©veloppement et au test de ton application Symfony (fixtures, framework de tests unitaires, etc.).</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --no-dev</span></span></code></pre></div><p>AprÃ¨s l&#39;installation, tu peux commencer Ã  utiliser la CLI de ton projet Symfony. CommenÃ§ons par exÃ©cuter les migrations de ton projet pour construire la structure de la base de donnÃ©es, car tu l&#39;as en effet crÃ©Ã©e mais elle est toujours vide Ã  ce stade.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bin/console</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> doctrine:migrations:migrate</span></span></code></pre></div></details><p>Si tu utilises ð LexikJWT :</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bin/console</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lexik:jwt:generate-keypair</span></span></code></pre></div><h2 id="etape-4-configurer-le-virtual-host" tabindex="-1">Ãtape 4 : Configurer le <em>virtual host</em> <a class="header-anchor" href="#etape-4-configurer-le-virtual-host" aria-label="Permalink to &quot;Ãtape 4 : Configurer le _virtual host_&quot;">â</a></h2><h3 id="pointage-du-virtual-host-par-defaut-sur-le-repertoire-du-projet" tabindex="-1">Pointage du virtual host par dÃ©faut sur le rÃ©pertoire du projet <a class="header-anchor" href="#pointage-du-virtual-host-par-defaut-sur-le-repertoire-du-projet" aria-label="Permalink to &quot;Pointage du virtual host par dÃ©faut sur le rÃ©pertoire du projet&quot;">â</a></h3><blockquote><p>â ï¸ Si ton projet se situe dans un sous-rÃ©pertoire de ton repo, il te faut remplacer dans la commande suivante <code>app.site/public</code> par <code>app.site/&lt;ton sous-rÃ©pertoire&gt;/public</code>. Par exemple, si tu as installÃ© Symfony dans un rÃ©pertoire <code>MonProjet</code> dans ton repo, tu dois remplacer ici <code>app.site/public</code> par <code>app.site/MonProjet/public</code> !</p></blockquote><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s#\/var\/www\/html#/var/www/app.site/public\n\n\t&lt;Directory /var/www/app.site/public&gt;\n\t\tAllowOverride all\n\t&lt;/Directory&gt;#g&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/apache2/sites-available/000-default.conf</span></span></code></pre></div><details><summary>SPOILER: DÃ©tail de la commande</summary><p>J&#39;avoue, cette commande est carrÃ©ment barbare ð§ et, entre nous, franchement pas jolie ð« </p><p>Il faut savoir que le serveur Apache peut gÃ©rer plusieurs sites Ã  la fois sur une mÃªme machine. Pour ce faire, il utilise ce qu&#39;on appelle des &quot;virtual hosts&quot;, c&#39;est-Ã -dire qu&#39;il configure la maniÃ¨re dont il doit servir les fichiers des diffÃ©rents rÃ©pertoires des sites concernÃ©s de maniÃ¨re atomique et isolÃ©e.</p><p>Ã l&#39;installation, Apache n&#39;a qu&#39;un virtual host configurÃ©, qui est son virtual host par dÃ©faut. Le fichier de configuration de ce virtual host est, pour la version Debian/Ubuntu d&#39;Apache, <code>/etc/apache2/sites-available/000-default.conf</code>. Si tu regardes le contenu de ce fichier avant d&#39;exÃ©cuter la commande donnÃ©e, tu remarqueras la ligne suivante :</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>DocumentRoot /var/www/html</span></span></code></pre></div><p>Cette ligne indique que pour ce virtual host, Apache doit servir les fichiers qui se trouvent dans le rÃ©pertoire <code>/var/www/html</code>. Dans ton cas, nous voulons servir les fichiers depuis le rÃ©pertoire <code>public/</code> car c&#39;est lÃ  que se trouve le fichier <code>index.php</code> qui est le front controller de Symfony ainsi que tous les fichiers statiques (CSS, JS, imagesâ¦). La commande modifie donc cette ligne en :</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>DocumentRoot /var/www/app.site/public</span></span></code></pre></div><p>Mais ce n&#39;est pas tout ! Tu te souviens du fichier <code>.htaccess</code> ?</p><p>Il s&#39;agit d&#39;un fichier de configuration Apache qui permet de surcharger certaines parties de la configuration du serveur ou du virtual host. Par dÃ©faut, ce fichier n&#39;est pas pris en compte par Apache. La commande ajoute donc sa prise en charge en ajoutant aussi dans la configuration du virtual host ces lignes :</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>&lt;Directory /var/www/app.site/public&gt;</span></span>
<span class="line"><span>    AllowOverride all</span></span>
<span class="line"><span>&lt;/Directory&gt;</span></span></code></pre></div><p>Elles spÃ©cifient que dans le rÃ©pertoire <code>/var/www/app.site/public</code> et ses sous-rÃ©pertoires, Apache doit tenir compte de toutes les directives de configuration qui se trouvent dans des fichiers <code>.htaccess</code>. Sans Ã§a, notre <code>.htaccess</code> ne servirait Ã  rien.</p><blockquote><p>â<strong>Pourquoi utiliser un <code>.htaccess</code> au lieu de tout mettre dans la configuration du virtual host ?</strong></p><p>Le souci avec la configuration du virtual host, c&#39;est que pour des raisons de sÃ©curitÃ©, les hÃ©bergeurs limitent souvent sa modification Ã  quelques directives (le <code>DocumentRoot</code> la plupart du temps, et Ã©ventuellement quelques autres). En revanche, la plupart des directives de configuration courantes telles que la rÃ©Ã©criture d&#39;URL sont gÃ©nÃ©ralement autorisÃ©es et prises en compte via les fichiers <code>.htaccess</code>. En embarquant la configuration du traitement des URL, propre Ã  l&#39;application indÃ©pendamment du serveur sur lequel elle est dÃ©ployÃ©e, plutÃ´t que dans la configuration du virtual host, on s&#39;assure de sa portabilitÃ©.</p></blockquote></details><h3 id="activation-du-module-de-reecriture-d-url" tabindex="-1">Activation du module de rÃ©Ã©criture d&#39;URL <a class="header-anchor" href="#activation-du-module-de-reecriture-d-url" aria-label="Permalink to &quot;Activation du module de rÃ©Ã©criture d&#39;URL&quot;">â</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a2enmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rewrite</span></span></code></pre></div><details><summary>SPOILER: DÃ©tail de la commande</summary><p>Ici, on active le module de rÃ©Ã©criture d&#39;URL d&#39;Apache. Celui-ci n&#39;est gÃ©nÃ©ralement pas activÃ© par dÃ©faut sur une installation vierge, il faut donc l&#39;activer pour que nos rÃ¨gles de rÃ©Ã©criture d&#39;URL soient prises en compte.</p><p>Si tu as dÃ©jÃ  activÃ© ce module, cette commande ne fera rien et t&#39;indiquera juste que le module est dÃ©jÃ  activÃ©. ð</p></details><h3 id="redemarrer-le-serveur-apache" tabindex="-1">RedÃ©marrer le serveur Apache <a class="header-anchor" href="#redemarrer-le-serveur-apache" aria-label="Permalink to &quot;RedÃ©marrer le serveur Apache&quot;">â</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apache2</span></span></code></pre></div><details><summary>SPOILER: DÃ©tail de la commande</summary><p>Le serveur Apache ne charge ses fichiers de configuration qu&#39;une seule fois, au dÃ©marrage. Comme tu viens de modifier un virtual host et d&#39;activer un de ses modules, tu dois redÃ©marrer Apache pour qu&#39;il recharger sa configuration. Si tu n&#39;as pas introduit d&#39;erreur dans la configuration du virtual host, cette commande ne devrait produire aucun message.</p></details><h2 id="etape-5-contempler-son-oelig-uvre-ð¤©" tabindex="-1">Ãtape 5 : Contempler son Åuvre ð¤© <a class="header-anchor" href="#etape-5-contempler-son-oelig-uvre-ð¤©" aria-label="Permalink to &quot;Ãtape 5 : Contempler son &amp;oelig;uvre ð¤©&quot;">â</a></h2><p>Tu dois normalement pouvoir te rendre sur <code>http://&lt;pseudo&gt;-server.eddi.cloud</code> et voir ta SPA en production.</p><p>Alors, heureuxÂ·se ?</p><h2 id="etape-6-mettre-a-jour-l-application-en-production" tabindex="-1">Ãtape 6 : Mettre Ã  jour l&#39;application en production <a class="header-anchor" href="#etape-6-mettre-a-jour-l-application-en-production" aria-label="Permalink to &quot;Ãtape 6 : Mettre Ã  jour l&#39;application en production&quot;">â</a></h2><p>Pour mettre Ã  jour la version de ton application en production, connecte-toi Ã  ta VM Server Cloud, puis :</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/www/app.site</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --no-dev</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bin/console</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> doctrine:migrations:migrate</span></span></code></pre></div><blockquote><p>â ï¸ MÃªme si aucune dÃ©pendance n&#39;a bougÃ© dans le projet (pas de nouveau bundle, pas de mise Ã  jour) il est important de lancer un <code>composer install</code> Ã  chaque dÃ©ploiement car Symfony en profite pour exÃ©cuter des tÃ¢ches bien utiles comme la vidange du cache de Twig qui permettent de finaliser la mise Ã  jour.</p></blockquote><h2 id="etape-7-bonus-installer-adminer-pour-administrer-la-bdd" tabindex="-1">Ãtape 7 (bonus) : Installer Adminer pour administrer la BDD <a class="header-anchor" href="#etape-7-bonus-installer-adminer-pour-administrer-la-bdd" aria-label="Permalink to &quot;Ãtape 7 (bonus) : Installer Adminer pour administrer la BDD&quot;">â</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> adminer</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a2enconf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> adminer</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apache2</span></span></code></pre></div><p>Adminer est accessible sur <code>http://&lt;pseudo&gt;-server.eddi.cloud/adminer</code> et tu peux te connecter Ã  ta base de donnÃ©es avec l&#39;utilisateur crÃ©Ã© plus haut dans ce tutoriel et son mot de passe ! ð</p><blockquote><p>â ï¸ Adminer &quot;rÃ©serve&quot; l&#39;URL <code>/adminer</code> sur ton serveur, tu dois donc t&#39;assurer de ne pas dÃ©finir de route commenÃ§ant par <code>/adminer</code> dans ton projet Symfony !</p></blockquote><h2 id="etape-8-bonus-pre-remplir-la-bdd-avec-les-fixtures" tabindex="-1">Ãtape 8 (bonus) : PrÃ©-remplir la BDD avec les fixtures <a class="header-anchor" href="#etape-8-bonus-pre-remplir-la-bdd-avec-les-fixtures" aria-label="Permalink to &quot;Ãtape 8 (bonus) : PrÃ©-remplir la BDD avec les fixtures&quot;">â</a></h2><blockquote><p>â¹ï¸ Les fixtures sont en principe dÃ©diÃ©es au dÃ©veloppement et au test des applications. En production, on utilise directement de vraies donnÃ©es. En rÃ¨gle gÃ©nÃ©rale, si des donnÃ©es doivent prÃ©-exister dans la base de donnÃ©es au premier dÃ©ploiement d&#39;une application, on prÃ©fÃ¨re faire un export d&#39;une base de donnÃ©es &quot;propre&quot; construite en vue de la mise en production, puis l&#39;importer sur le serveur. Mais dans le cadre d&#39;un projet d&#39;apothÃ©ose, on comprend parfaitement que les fixtures puissent remplir aussi ce rÃ´le.</p></blockquote><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/www/app.site</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s#APP_ENV=prod#APP_ENV=dev#&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env.local</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bin/console</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> doctrine:migrations:migrate</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bin:console</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> doctrine:fixtures:load</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s#APP_ENV=dev#APP_ENV=prod#&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env.local</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --no-dev</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-1bcd8184><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><!----></div><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link next" href="/menus/WP.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Next page</span><span class="title" data-v-1bcd8184>WordPress</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"api-examples.md\":\"DhQHDfAp\",\"baptiste_02-deploiement-site-statique.md\":\"CvMh-gHT\",\"baptiste_03-virtual-hosts.md\":\"Dge8PyAr\",\"baptiste_04-deploiement-app-laravel.md\":\"CH-p9dk0\",\"baptiste_05-docker-install.md\":\"CN2bpcLO\",\"baptiste_06-docker-commandes-basiques.md\":\"BusELOhz\",\"baptiste_07-docker-bind-mounts.md\":\"VJmUpKOM\",\"baptiste_08-docker-exec.md\":\"Cx8EZJy4\",\"baptiste_09-dockerfile.md\":\"Dvj9FV4A\",\"baptiste_10-docker-compose.md\":\"BHM7tjEk\",\"baptiste_11-docker-production.md\":\"DXCt-sop\",\"baptiste_12-orchestration.md\":\"D-JwooAC\",\"baptiste_accessib_baptiste.md\":\"GsUPy9gM\",\"baptiste_guide-images_accessib_baptiste.md\":\"Djq6o6lJ\",\"baptiste_seo.md\":\"BqWw2JwM\",\"cecile_e03_vers-react.md\":\"BhRCc5Hd\",\"cecile_e12_recap-react.md\":\"MagA8YvB\",\"cecile_e16_recap-redux.md\":\"CXUV4Wo6\",\"cecile_e18_tests.md\":\"CzYvECQ3\",\"cecile_e19_authentification.md\":\"DVsU43R-\",\"cecile_e20_ouvertures.md\":\"uKAiIK2L\",\"cicd_ci-cd-definitions.md\":\"DQgLgThT\",\"cicd_ci-cd-index.md\":\"BwFMAjW_\",\"cicd_ci-cd-runner-gitlab.md\":\"CCk4F_38\",\"cicd_tips_pour_deployer_avec_un_runner.md\":\"CjAyqmjz\",\"index.md\":\"B3LguHzo\",\"laravel_blade.md\":\"-QC0AXzq\",\"laravel_controllers.md\":\"DAcdB63z\",\"laravel_dossiers.md\":\"BPz3LtVd\",\"laravel_fonctionnalites.md\":\"cFCi1hDK\",\"laravel_install.md\":\"DA6AGmsN\",\"laravel_models.md\":\"DmVsU614\",\"laravel_routes.md\":\"BAnUJaJ_\",\"laure_install_php-vanilla.md\":\"DyEUH6F0\",\"laure_notions_dw.md\":\"DDk7d6zg\",\"les_autres.md\":\"BZhutgC4\",\"loic_deploy-directus.md\":\"D58g66Sk\",\"loic_deploy-https.md\":\"XIkFG5iA\",\"loic_deploy-symfony.md\":\"D4htCBmG\",\"loic_deploy-vite-spa.md\":\"BEGA6zSA\",\"markdown-examples.md\":\"BBSAOAYD\",\"menus_baptiste.md\":\"ddhwDzQq\",\"menus_cecile.md\":\"N4GO3rkQ\",\"menus_cicd.md\":\"BwJR5v4c\",\"menus_laravel.md\":\"D46LnJOB\",\"menus_les_autres.md\":\"Cu0mrIJp\",\"menus_loic.md\":\"COkRPM2H\",\"menus_mep.md\":\"SN7WNJhe\",\"menus_symfony.md\":\"Ds0B1Ahj\",\"menus_wp.md\":\"C0pOILtd\",\"mep_mise-en-prod-symfony.md\":\"CID-GgAO\",\"mep_mise_en_prod_symfony_web_encore.md\":\"Be37bFsI\",\"symfony_api_with_symfony.md\":\"Bk8jRrwT\",\"symfony_mise-en-prod-symfony.md\":\"DaCdhi29\",\"symfony_mise_en_prod_symfony_web_encore.md\":\"Dy90qomz\",\"symfony_symfony_from_scratch.md\":\"BYOCcxiv\",\"wp_wp-aller-plus-loin-occ.md\":\"Dz7q6VEi\",\"wp_wp-creer-site-occ.md\":\"BLYPMXL8\",\"wp_wp-notes.md\":\"Bw776Xu7\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Fiches Dev Web\",\"description\":\"Dev Web tutorials\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"Home\",\"link\":\"/index\"},{\"text\":\"Feat.\",\"link\":\"/menus/les_autres\"}],\"sidebar\":[{\"text\":\"Navigation Rapide\",\"items\":[{\"text\":\"WordPress\",\"link\":\"/menus/WP\"},{\"text\":\"MEP\",\"link\":\"/menus/mep\"},{\"text\":\"Laravel\",\"link\":\"/menus/laravel\"},{\"text\":\"React\",\"link\":\"/menus/cecile\"},{\"text\":\"Docker\",\"link\":\"/menus/baptiste\"},{\"text\":\"CI-CD\",\"link\":\"/menus/cicd\"},{\"text\":\"Symfony\",\"link\":\"/menus/symfony\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/lorlor31\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>